"use strict";var __awaiter=this&&this.__awaiter||function(e,t,o,s){return new(o||(o=Promise))((function(a,n){function r(e){try{l(s.next(e))}catch(e){n(e)}}function d(e){try{l(s.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,d)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0});const lodash_1=require("lodash"),defaultStatus=404,defaultMessage="Route not found!";exports.default=(e,t,o,s)=>__awaiter(void 0,void 0,void 0,(function*(){if(console.log("ðŸš€ ~ errorHandler ~ error:",e),e){const s={message:(0,lodash_1.get)(e,"message")||defaultMessage,details:(0,lodash_1.get)(e,"details"),fe:(0,lodash_1.get)(e,"fe"),code:(0,lodash_1.get)(e,"statusCode")||(0,lodash_1.get)(e,"code")||404,url:(0,lodash_1.get)(t,"originalUrl"),body:(0,lodash_1.get)(e,"body"),query:(0,lodash_1.get)(e,"query")};s.message.includes("connect ECONNREFUSED")&&Object.assign(s,{details:"Please check connection"}),"test"!==process.env.NODE_ENV&&console.log("\n-- errorHandler --\n",s),o.status(s.code).send(s)}return s()}));